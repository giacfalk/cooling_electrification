capacity <- scenarios %>% filter(str_detect(X, "Capacity"))
investment <- scenarios %>% filter(str_detect(X, "Investment"))
connections <- scenarios %>% filter(str_detect(X, "Connections"))
capacity$X=gsub("3.Capacity_", "", capacity$X)
investment$X=gsub("4.Investment_", "", investment$X)
connections$X=gsub("2.New_Connections_", "", connections$X)
ggplot(capacity, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("Technology")
ggplot(investment, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("Technology")
ggplot(capacity, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("Technology")
ggplot(investment, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("Technology")
ggplot(connections, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("New connections (million)")+
xlab("Technology")
library(tidyverse)
library(ggplot2)
residential<-read.csv('D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Prod_Uses_Agriculture/Repo/onsset/results/ke-1-0_0_0_0_0_0_summary.csv') %>% mutate(Scenario="Residential")
all<-read.csv('D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Prod_Uses_Agriculture/Repo/onsset/results/ke-1-0_1_0_0_1_0_summary.csv') %>% mutate(Scenario="All")
scenarios <- rbind(residential, all)
capacity <- scenarios %>% filter(str_detect(X, "Capacity"))
investment <- scenarios %>% filter(str_detect(X, "Investment"))
connections <- scenarios %>% filter(str_detect(X, "Connections"))
capacity$X=gsub("3.Capacity_", "", capacity$X)
investment$X=gsub("4.Investment_", "", investment$X)
connections$X=gsub("2.New_Connections_", "", connections$X)
ggplot(capacity, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("Technology")
ggplot(investment, aes(x=Scenario, y=(X2025+X2030)/1000000000, group=X, fill=X))+
geom_col()+
ylab("Investment (bn.)")+
xlab("Technology")
ggplot(connections, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("New connections (million)")+
xlab("Technology")
ggplot(capacity, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("Technology")
ggplot(investment, aes(x=Scenario, y=(X2025+X2030)/1000000000, group=X, fill=X))+
geom_col()+
ylab("Investment (bn.)")+
xlab("Technology")
ggplot(connections, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("New connections (million)")+
xlab("Technology")
cowplot::plot_grid(a + theme(legend.position = "none"), b, c, nrow = 1, labels = "AUTO", )
a<-ggplot(capacity, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("Technology")
b<-ggplot(investment, aes(x=Scenario, y=(X2025+X2030)/1000000000, group=X, fill=X))+
geom_col()+
ylab("Investment (bn.)")+
xlab("Technology")+
theme(legend.position = "none")
c<-ggplot(connections, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("New connections (million)")+
xlab("Technology")+
theme(legend.position = "none")
cowplot::plot_grid(a + theme(legend.position = "none"), b, c, nrow = 1, labels = "AUTO")
a<-ggplot(capacity, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("Technology")+
theme(legend.position = "bottom", legend.direction = "horizontal")
b<-ggplot(investment, aes(x=Scenario, y=(X2025+X2030)/1000000000, group=X, fill=X))+
geom_col()+
ylab("Investment (bn.)")+
xlab("Technology")+
theme(legend.position = "none")
c<-ggplot(connections, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("New connections (million)")+
xlab("Technology")+
theme(legend.position = "none")
cowplot::plot_grid(a + theme(legend.position = "none"), b, c, nrow = 1, labels = "AUTO")
cowplot::plot_grid(cowplot::plot_grid(a + theme(legend.position = "none"), b, c, nrow = 1, labels = "AUTO"), cowplot::get_legend(a), ncol = 1, rel_heights = c(1, 0.05))
cowplot::plot_grid(cowplot::plot_grid(a + theme(legend.position = "none"), b, c, nrow = 1, labels = "AUTO"), cowplot::get_legend(a), ncol = 1, rel_heights = c(1, 0.15))
a<-ggplot(capacity, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("Capacity (GW)")+
xlab("")+
theme(legend.position = "bottom", legend.direction = "horizontal")+
scale_fill_discrete(name="Tech.")
b<-ggplot(investment, aes(x=Scenario, y=(X2025+X2030)/1000000000, group=X, fill=X))+
geom_col()+
ylab("Investment (bn.)")+
xlab("")+
theme(legend.position = "none")
c<-ggplot(connections, aes(x=Scenario, y=(X2025+X2030)/1000000, group=X, fill=X))+
geom_col()+
ylab("New connections (million)")+
xlab("")+
theme(legend.position = "none")
cowplot::plot_grid(cowplot::plot_grid(a + theme(legend.position = "none"), b, c, nrow = 1, labels = "AUTO"), cowplot::get_legend(a), ncol = 1, rel_heights = c(1, 0.15))
ggsave("supply_analysis.png", cowplot::plot_grid(cowplot::plot_grid(a + theme(legend.position = "none"), b, c, nrow = 1, labels = "AUTO"), cowplot::get_legend(a), ncol = 1, rel_heights = c(1, 0.15)), device = "png")
ggsave("supply_analysis.png", cowplot::plot_grid(cowplot::plot_grid(a + theme(legend.position = "none"), b, c, nrow = 1, labels = "AUTO"), cowplot::get_legend(a), ncol = 1, rel_heights = c(1, 0.15)), device = "png", scale=1.2)
library(rgee)
library(sf)
rgee::ee_reattach()
ee_Initialize()
library(dplyr)
imageCollection = ee$ImageCollection("NOAA/VIIRS/DNB/MONTHLY_V1/VCMSLCFG");
nl14 =  imageCollection$filterDate('2014-01-01', '2015-01-01')$select('avg_rad')
nl15 =  imageCollection$filterDate('2015-01-01', '2016-01-01')$select('avg_rad')
nl16 =  imageCollection$filterDate('2016-01-01', '2017-01-01')$select('avg_rad')
nl17 =  imageCollection$filterDate('2017-01-01', '2018-01-01')$select('avg_rad')
nl18 =  imageCollection$filterDate('2018-01-01', '2019-01-01')$select('avg_rad')
nl19 =  imageCollection$filterDate('2019-01-01', '2020-01-01')$select('avg_rad')
# Import countries borders
Countries = ee$FeatureCollection('users/giacomofalchetta/gadm')$filter(ee$Filter$Or(ee$Filter$eq('ISO3', 'BGD'), ee$Filter$eq('ISO3', 'BOL'), ee$Filter$eq('ISO3', 'KHM'), ee$Filter$eq('ISO3', 'HND'), ee$Filter$eq('ISO3', 'IND'), ee$Filter$eq('ISO3', 'PRK'), ee$Filter$eq('ISO3', 'LBY'), ee$Filter$eq('ISO3', 'MNG'), ee$Filter$eq('ISO3', 'MMR'), ee$Filter$eq('ISO3', 'NPL'), ee$Filter$eq('ISO3', 'NIC'), ee$Filter$eq('ISO3', 'PAK'), ee$Filter$eq('ISO3', 'PNG'), ee$Filter$eq('ISO3', 'PER'), ee$Filter$eq('ISO3', 'PHL'), ee$Filter$eq('ISO3', 'SYR'), ee$Filter$eq('ISO3', 'TLS'), ee$Filter$eq('ISO3', 'YEM')))
#Import population layer (change these lines to change the population dataset to LandScan, WorldPop, HRSL, or GHSL)
pop14 = ee$ImageCollection("WorldPop/GP/100m/pop")$select('population')$filterDate('2019-01-01', '2020-01-01')$median()
ee_print(pop14)
ee_print(pop14)
#Load libraries
library(sf)
library(raster)
library(googledrive)
library(data.table)
library(dplyr)
library(ggplot2)
library(scales)
library(plyr)
library(ggpmisc)
library(wbstats)
library(ggrepel)
library(ineq)
library(cowplot)
library(rworldmap)
library(rgdal)
library(reshape2)
library(tidyr)
library(readxl)
library(rgdal)
library(ggthemes)
library(RColorBrewer)
library(gtools)
library(grid)
library(countrycode)
library(spatstat)
library(exactextractr)
library(stargazer)
library(viridis)
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc = noacc %>% group_by(GID_0) %>% summarise(noacc15 = sum(noacc15, na.rm = T))
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0
noacc = noacc %>% group_by(as.character(GID_0)) %>% summarise(noacc15 = sum(noacc15, na.rm = T))
noacc = noacc %>% group_by(GID_0) %>% summarise(noacc15 = sum(noacc15, na.rm = T)) %>% ungroup()
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc = noacc %>% group_by(GID_0) %>% summarise(noacc15 = sum(noacc15, na.rm = T))
View(noacc)
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
View(noacc)
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% summarise(noacc15 = sum(noacc15, na.rm = T))
noacc = noacc %>% group_by(GID_0)
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T))
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T))
View(noacc)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T)/1000000)
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T)/1000000)
View(noacc)
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T))
View(noacc)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
View(noacc)
noacc$diff = noacc$noacc19/noacc$noacc15
View(noacc)
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop_africa.csv')
pop$GID_0 <- as.character(pop$GID_0)
pop = pop %>% group_by(GID_0) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc16 = sum(noacc16, na.rm = T), noacc17 = sum(noacc17, na.rm = T), noacc18 = sum(noacc18, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop_africa.csv')
pop$GID_0 <- as.character(pop$GID_0)
pop = pop %>% group_by(GID_0) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
# merge with pop
merger <- merge(pop, noacc)
View(merger)
# merge with pop
merger <- merge(pop, noacc, by="GID_0")
# calculate elrates
merger = merger %>% mutate(elrate15 = 1-(noacc15/pop15), elrate16 = 1-(noacc16/pop16), elrate17 = 1-(noacc17/pop17), elrate18 = 1-(noacc18/pop18), elrate19 = 1-(noacc19/pop19))
# select countries of interest
merger=subset(merger, GID_0 != "ATF" & GID_0 != "EGY" & GID_0 != "ESH"& GID_0 != "ESP" & GID_0 != "LBY" & GID_0 != "MAR" & GID_0 != "MYT" & GID_0 != "SYC" & GID_0 != "COM" & GID_0 != "YEM" & GID_0 != "TUN" & GID_0 != "DZA" & GID_0 != "SHN" & GID_0 != "DJI" & GID_0 != "STP")
# use ISO2 code
merger$ISO2 = countrycode::countrycode(merger$GID_0, "iso3c", "iso2c")
View(merger)
View(merger)
# write.csv
write.csv(merger, "D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/UNSDSN/data_SSA.csv")
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc (4).csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc16 = sum(noacc16, na.rm = T), noacc17 = sum(noacc17, na.rm = T), noacc18 = sum(noacc18, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop (4).csv')
pop$GID_0 <- as.character(pop$GID_0)
pop = pop %>% group_by(GID_0) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
# merge with pop
merger <- merge(pop, noacc, by="GID_0")
# calculate elrates
merger = merger %>% mutate(elrate15 = 1-(noacc15/pop15), elrate16 = 1-(noacc16/pop16), elrate17 = 1-(noacc17/pop17), elrate18 = 1-(noacc18/pop18), elrate19 = 1-(noacc19/pop19))
# use ISO2 code
merger$ISO2 = countrycode::countrycode(merger$GID_0, "iso3c", "iso2c")
# write.csv
write.csv(merger, "D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/UNSDSN/data_RoW.csv")
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc (4).csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc16 = sum(noacc16, na.rm = T), noacc17 = sum(noacc17, na.rm = T), noacc18 = sum(noacc18, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop (4).csv')
pop$GID_0 <- as.character(pop$GID_0)
pop = pop %>% group_by(GID_0) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc (4).csv')
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc (4).csv')
noacc$ISO2 <- as.character(noacc$ISO2)
noacc = noacc %>% group_by(ISO2) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc16 = sum(noacc16, na.rm = T), noacc17 = sum(noacc17, na.rm = T), noacc18 = sum(noacc18, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop (4).csv')
pop$ISO2 <- as.character(pop$ISO2)
pop = pop %>% group_by(ISO2) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
# merge with pop
merger <- merge(pop, noacc, by="ISO2")
# calculate elrates
merger = merger %>% mutate(elrate15 = 1-(noacc15/pop15), elrate16 = 1-(noacc16/pop16), elrate17 = 1-(noacc17/pop17), elrate18 = 1-(noacc18/pop18), elrate19 = 1-(noacc19/pop19))
# write.csv
write.csv(merger, "D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/UNSDSN/data_RoW.csv")
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc (4).csv')
noacc$ISO3 <- as.character(noacc$ISO3)
noacc = noacc %>% group_by(ISO3) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc16 = sum(noacc16, na.rm = T), noacc17 = sum(noacc17, na.rm = T), noacc18 = sum(noacc18, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop (4).csv')
pop$ISO3 <- as.character(pop$ISO3)
pop = pop %>% group_by(ISO3) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
# merge with pop
merger <- merge(pop, noacc, by="ISO3")
# calculate elrates
merger = merger %>% mutate(elrate15 = 1-(noacc15/pop15), elrate16 = 1-(noacc16/pop16), elrate17 = 1-(noacc17/pop17), elrate18 = 1-(noacc18/pop18), elrate19 = 1-(noacc19/pop19))
# write.csv
write.csv(merger, "D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/UNSDSN/data_RoW.csv")
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc16 = sum(noacc16, na.rm = T), noacc17 = sum(noacc17, na.rm = T), noacc18 = sum(noacc18, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop_africa.csv')
pop$GID_0 <- as.character(pop$GID_0)
pop = pop %>% group_by(GID_0) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
# merge with pop
merger <- merge(pop, noacc, by="GID_0")
# calculate elrates
merger = merger %>% mutate(elrate15 = 1-(noacc15/pop15), elrate16 = 1-(noacc16/pop16), elrate17 = 1-(noacc17/pop17), elrate18 = 1-(noacc18/pop18), elrate19 = 1-(noacc19/pop19))
# select countries of interest
merger=subset(merger, GID_0 != "ATF" & GID_0 != "EGY" & GID_0 != "ESH"& GID_0 != "ESP" & GID_0 != "LBY" & GID_0 != "MAR" & GID_0 != "MYT" & GID_0 != "SYC" & GID_0 != "COM" & GID_0 != "YEM" & GID_0 != "TUN" & GID_0 != "DZA" & GID_0 != "SHN" & GID_0 != "DJI" & GID_0 != "STP")
# use ISO2 code
merger$ISO2 = countrycode::countrycode(merger$GID_0, "iso3c", "iso2c")
# write.csv
write.csv(merger, "D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/UNSDSN/data_SSA.csv")
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc16 = sum(noacc16, na.rm = T), noacc17 = sum(noacc17, na.rm = T), noacc18 = sum(noacc18, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop_africa.csv')
pop$GID_0 <- as.character(pop$GID_0)
pop = pop %>% group_by(GID_0) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
# merge with pop
merger <- merge(pop, noacc, by="GID_0")
# calculate elrates
merger = merger %>% mutate(elrate15 = 1-(noacc15/pop15), elrate16 = 1-(noacc16/pop16), elrate17 = 1-(noacc17/pop17), elrate18 = 1-(noacc18/pop18), elrate19 = 1-(noacc19/pop19))
# select countries of interest
merger=subset(merger, GID_0 != "ATF" & GID_0 != "EGY" & GID_0 != "ESH"& GID_0 != "ESP" & GID_0 != "LBY" & GID_0 != "MAR" & GID_0 != "MYT" & GID_0 != "SYC" & GID_0 != "COM" & GID_0 != "YEM" & GID_0 != "TUN" & GID_0 != "DZA" & GID_0 != "SHN" & GID_0 != "DJI" & GID_0 != "STP")
# use ISO2 code
merger$ISO2 = countrycode::countrycode(merger$GID_0, "iso3c", "iso2c")
# write.csv
write.csv(merger, "D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/UNSDSN/data_SSA.csv")
library(tidyverse)
noacc<-read.csv('C:/Users/GIACOMO/Google Drive/no_acc_africa.csv')
noacc$GID_0 <- as.character(noacc$GID_0)
noacc = noacc %>% group_by(GID_0) %>% dplyr::summarise(noacc15 = sum(noacc15, na.rm = T), noacc16 = sum(noacc16, na.rm = T), noacc17 = sum(noacc17, na.rm = T), noacc18 = sum(noacc18, na.rm = T), noacc19 = sum(noacc19, na.rm = T))
pop<-read.csv('C:/Users/GIACOMO/Google Drive/pop_africa.csv')
pop$GID_0 <- as.character(pop$GID_0)
pop = pop %>% group_by(GID_0) %>% dplyr::summarise(pop15 = sum(pop15, na.rm = T), pop16 = sum(pop16, na.rm = T), pop17 = sum(pop17, na.rm = T), pop18 = sum(pop18, na.rm = T), pop19 = sum(pop19, na.rm = T))
# merge with pop
merger <- merge(pop, noacc, by="GID_0")
# calculate elrates
merger = merger %>% mutate(elrate15 = 1-(noacc15/pop15), elrate16 = 1-(noacc16/pop16), elrate17 = 1-(noacc17/pop17), elrate18 = 1-(noacc18/pop18), elrate19 = 1-(noacc19/pop19))
# select countries of interest
merger=subset(merger, GID_0 != "ATF" & GID_0 != "EGY" & GID_0 != "ESH"& GID_0 != "ESP" & GID_0 != "LBY" & GID_0 != "MAR" & GID_0 != "MYT" & GID_0 != "SYC" & GID_0 != "COM" & GID_0 != "YEM" & GID_0 != "TUN" & GID_0 != "DZA" & GID_0 != "SHN" & GID_0 != "DJI" & GID_0 != "STP")
# use ISO2 code
merger$ISO2 = countrycode::countrycode(merger$GID_0, "iso3c", "iso2c")
# write.csv
write.csv(merger, "D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/UNSDSN/data_SSA.csv")
#Wrapper
library(tidyverse)
library(reshape2)
library(lubridate)
library(raster)
library(sf)
library(exactextractr)
library(countrycode)
library(rasterVis)
library(maps)
library(mapdata)
library(maptools)
library(rgdal)
library(gglorenz)
library(fasterize)
library(viridis)
library(data.table)
setwd('D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA')
# parameters
base_temp = 26
########
avg_house_area_urban <- 60 #sq m.
avg_house_area_rural <- 100 #sq m.
share_house_cooled_urban = 0.80
share_house_cooled_rural = 0.35
avg_house_volume_urban <- avg_house_area_urban * 2.5 * share_house_cooled_urban #m3
avg_house_volume_rural <- avg_house_area_rural * 3 * share_house_cooled_rural #m3
m2_per_Cton = 45
CC_urban = avg_house_area_urban*share_house_cooled_urban/m2_per_Cton
CC_rural = avg_house_area_rural*share_house_cooled_rural/m2_per_Cton
cooling_ton_to_kw = 3.51685
kw_to_j_per_hour = 3600000
m3toliters = 1000
EER_rural = 2.2
EER_urban = 2.9
heating_loss_factor_urban = 1.15
heating_loss_factor_rural = 1.25
#####
Fan_power = 70
min_hrs_permonth_fan_use = 0
max_hrs_permonth_fan_use = 480
kwh_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_kwh/tbase', full.names = T)
kwh_sens <- lapply(kwh_sens, read.csv)
kwh_sens <- data.table::rbindlist(kwh_sens, idcol = T)
kwh_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_kwh/tbase', full.names = T)
kwh_sens <- lapply(kwh_sens, read.csv)
kwh_sens <- data.table::rbindlist(kwh_sens, idcol = T)
kwh_sens$.id
kwh_sens$Scenario=NULL
kwh_sens$Scenario=NA
kwh_sens$Scenario <- ifelse(kwh_sens$.id==1, "22", kwh_sens$Scenario)
kwh_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_kwh/tbase', full.names = T)
kwh_sens
kwh_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_kwh/tbase', full.names = T)
kwh_sens <- lapply(kwh_sens, read.csv)
kwh_sens <- data.table::rbindlist(kwh_sens, idcol = T)
kwh_sens$Scenario=NA
kwh_sens$Scenario <- ifelse(kwh_sens$.id==1, "22", kwh_sens$Scenario)
kwh_sens$Scenario <- ifelse(kwh_sens$.id==2, "24", kwh_sens$Scenario)
kwh_sens$Scenario <- ifelse(kwh_sens$.id==3, "26", kwh_sens$Scenario)
kwh_sens$Scenario <- ifelse(kwh_sens$.id==4, "28", kwh_sens$Scenario)
kwh_country_sens_tbase =ggplot(kwh_sens)+
theme_classic()+
geom_bar(data = kwh_sens, aes(x = id , y = kwh/1000000000, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="Tbase", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of kWh to Tbase")
kwh_country_sens_tbase
kwh_country_sens_tbase =ggplot(kwh_sens)+
theme_classic()+
geom_bar(data = kwh_sens, aes(x = id , y = twh/1000000000, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="Tbase", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of kWh to Tbase")
kwh_country_sens_tbase
kwh_country_sens_tbase =ggplot(kwh_sens)+
theme_classic()+
geom_bar(data = kwh_sens, aes(x = id , y = twh, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="Tbase", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of kWh to Tbase")
kwh_country_sens_tbase
kwh_sens$scenario
kwh_country_sens_tbase =ggplot(kwh_sens)+
theme_classic()+
geom_bar(data = kwh_sens, aes(x = scenario, y = twh, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="Tbase", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of kWh to Tbase")+
facet_wrap(~ id, ncol=2)
kwh_country_sens_tbase
kwh_country_sens_tbase =ggplot(kwh_sens)+
theme_classic()+
geom_bar(data = kwh_sens, aes(x = id, y = twh, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="Tbase", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of kWh to Tbase")+
facet_wrap(~ scenario, ncol=2)
kwh_country_sens_tbase
kwh_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_kwh/eer', full.names = T)
kwh_sens <- lapply(kwh_sens, read.csv)
kwh_sens <- data.table::rbindlist(kwh_sens, idcol = T)
kwh_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_kwh/eer', full.names = T)
kwh_sens
kwh_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_kwh/eer', full.names = T)
kwh_sens <- lapply(kwh_sens, read.csv)
kwh_sens <- data.table::rbindlist(kwh_sens, idcol = T)
kwh_sens$Scenario=NA
kwh_sens$Scenario <- ifelse(kwh_sens$.id==1, "2.2U, 2R", kwh_sens$Scenario)
kwh_sens$Scenario <- ifelse(kwh_sens$.id==2, "2.9U, 2.2R", kwh_sens$Scenario)
kwh_sens$Scenario <- ifelse(kwh_sens$.id==3, "3.2U, 2.9R", kwh_sens$Scenario)
kwh_country_sens_eer =ggplot(kwh_sens)+
theme_classic()+
geom_bar(data = kwh_sens, aes(x = id, y = twh, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="eer", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of kWh to eer")+
facet_wrap(~ scenario, ncol=2)
kwh_country_sens_eer
co2_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_co2/tbase', full.names = T)
co2_sens <- lapply(co2_sens, read.csv)
co2_sens <- data.table::rbindlist(co2_sens, idcol = T)
co2_sens$Scenario=NA
co2_sens$Scenario <- ifelse(co2_sens$.id==1, "22", co2_sens$Scenario)
co2_sens$Scenario <- ifelse(co2_sens$.id==2, "24", co2_sens$Scenario)
co2_sens$Scenario <- ifelse(co2_sens$.id==3, "26", co2_sens$Scenario)
co2_sens$Scenario <- ifelse(co2_sens$.id==4, "28", co2_sens$Scenario)
co2_country_sens_tbase =ggplot(co2_sens)+
theme_classic()+
geom_bar(data = co2_sens, aes(x = id, y = twh, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="Tbase", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of co2 to Tbase")+
facet_wrap(~ scenario, ncol=2)
co2_country_sens_tbase =ggplot(co2_sens)+
theme_classic()+
geom_bar(data = co2_sens, aes(x = id, y = twh, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="Tbase", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of CO2 to Tbase")+
facet_wrap(~ scenario, ncol=2)
co2_country_sens_tbase
co2_country_sens_tbase =ggplot(co2_sens)+
theme_classic()+
geom_bar(data = co2_sens, aes(x = id, y = co2, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="Tbase", palette = "Set1")+
ylab("Latent power demand for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of CO2 to Tbase")+
facet_wrap(~ scenario, ncol=2)
co2_country_sens_tbase
co2_sens <- list.files(path = 'D:/OneDrive - FONDAZIONE ENI ENRICO MATTEI/Current papers/Latent demand air cooling/cooling_electricity_SSA/sensitivity_co2/eer', full.names = T)
co2_sens <- lapply(co2_sens, read.csv)
co2_sens <- data.table::rbindlist(co2_sens, idcol = T)
co2_sens$Scenario=NA
co2_sens$Scenario <- ifelse(co2_sens$.id==1, "2.2U, 2R", co2_sens$Scenario)
co2_sens$Scenario <- ifelse(co2_sens$.id==2, "2.9U, 2.2R", co2_sens$Scenario)
co2_sens$Scenario <- ifelse(co2_sens$.id==3, "3.2U, 2.9R", co2_sens$Scenario)
co2_country_sens_eer =ggplot(co2_sens)+
theme_classic()+
geom_bar(data = co2_sens, aes(x = id, y = twh, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="EERs", palette = "Set1")+
ylab("Emission implications for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of co2 to EERs")+
facet_wrap(~ scenario, ncol=2)
co2_country_sens_eer
co2_country_sens_eer =ggplot(co2_sens)+
theme_classic()+
geom_bar(data = co2_sens, aes(x = id, y = co2, fill=Scenario), stat = "sum", position = "dodge", show.legend=c(size=FALSE)) +
theme(axis.text.x = element_text(angle = 90, size=8), plot.title = element_text(hjust = 0.5))+
scale_fill_brewer(name="EERs", palette = "Set1")+
ylab("Emission implications for air cooling \nfrom households without electricty")+
xlab("Technology adoption scenario")+
ggtitle("Sensitivity of co2 to EERs")+
facet_wrap(~ scenario, ncol=2)
co2_country_sens_eer
